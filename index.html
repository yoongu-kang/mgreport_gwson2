<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <!-- 모바일 기기에서 올바른 화면 비율을 위한 뷰포트 설정 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 학습 분석 리포트 - 손건우 학생</title>

    <!-- Tailwind CSS CDN 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- D3.js 및 D3 Word Cloud 라이브러리 로드 -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/jasondavies/d3-cloud@v1.2.7/build/d3.layout.cloud.js"></script>
    
    <!-- Google Fonts (Inter, Noto Sans KR) 로드 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* 기본 바디 스타일 및 폰트 설정 */
        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
            background-color: #f9fafb; /* 부드러운 회색 배경 */
            color: #1f2937; /* 가독성 높은 텍스트 색상 */
            -webkit-font-smoothing: antialiased; /* 폰트 렌더링 최적화 */
            -moz-osx-font-smoothing: grayscale;
        }
        /* 섹션 카드 공통 스타일 */
        .section-card {
            background-color: white;
            border-radius: 0.75rem; /* 12px */
            padding: 1.5rem; /* 24px */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            margin-bottom: 1.5rem; /* 24px */
        }

        /* 인쇄 시 스타일 조정 */
        @media print {
            body {
                background-color: #ffffff;
                color: #000000;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            .section-card {
                box-shadow: none;
                border: 1px solid #e5e7eb;
                margin-bottom: 1rem;
                padding: 1rem;
            }
            .chart-container, .word-cloud-container {
                page-break-inside: avoid;
            }
            footer { display: none; }
        }
        
        /* 진도 분석 그리드 스타일 */
        .progress-grid {
            display: grid;
            gap: 0.5rem;
            text-align: center;
            font-size: 0.875rem;
            color: #374151;
        }
        .grid-cell {
            background-color: #f3f4f6;
            border-radius: 0.5rem;
            padding: 0.75rem 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            position: relative;
            transition: background-color 0.3s ease;
        }
        .grid-header {
            background-color: #e5e7eb;
            font-weight: 700;
            color: #1f2937;
        }
        /* 나의 진도 표시 */
        .me-icon {
            position: absolute;
            top: 0.25rem;
            left: 0.25rem;
            background-color: #ef4444; /* red-500 */
            color: white;
            font-size: 0.625rem;
            font-weight: 700;
            padding: 0.1rem 0.3rem;
            border-radius: 0.375rem;
        }
        /* 상위권 경로 표시 */
        .top-tier-path {
            border: 2px solid #facc15; /* yellow-400 */
            box-shadow: 0 0 0 2px rgba(250, 204, 21, 0.5);
        }
        /* 탭 버튼 스타일 */
        .tab-button {
            padding: 0.75rem 1.5rem;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            color: #6b7280;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .tab-button.active {
            border-color: #4f46e5;
            color: #4f46e5;
        }
        /* 워드 클라우드 텍스트 스타일 */
        .word-cloud-text {
            cursor: pointer;
            transition: transform 0.2s ease-out, filter 0.2s ease-out;
        }
        .word-cloud-text:hover {
            transform: scale(1.1);
            filter: brightness(1.2);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>

    <main class="max-w-3xl mx-auto p-4 md:p-6">
        <!-- Report Title and Period Section -->
        <div class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">손건우 학생 월간 리포트</h1>
            <p class="text-md md:text-lg text-gray-500 mt-2">2025년 7월 학습 분석</p>
            <div class="mt-3 text-sm text-gray-400">
                <p>분석 기간: 2025년 7월 1일 ~ 7월 31일</p>
            </div>
        </div>
        
        <!-- D-Day Section -->
        <section class="section-card p-4">
            <div class="flex-grow mb-4">
                <p class="text-gray-700 text-m md:text-base leading-relaxed">
                    뜨거운 여름 햇살 아래, 한 학기를 성실히 마무리한 아이의 모습이 더욱 반짝입니다. <strong>7월, 그동안의 여정을 되돌아보며 건우 학생을 향한 격려와 응원을 담아보았습니다.</strong><br>
                </p>
            </div>
        </section>
        <!-- 7월의 성장 -->
        <section class="section-card">
            <h2 class="text-xl font-bold mb-3 text-indigo-600">🚀 7월의 성장</h2>
            <p class="text-gray-600 mb-4">
                6월에 비해 <strong class="text-gray-800">스스로 세운 수강 계획의 출석률이 25% 늘어, 학습 태도가 더욱 성실해졌습니다.</strong><br><br>
                또한 <strong class="text-gray-800">과학 과목에서 질문/답변 게시판을 통해 4회 이상 선생님께 질문하는 등 호기심을 바탕으로 탐구하는 자세가 훌륭합니다.</strong><br><br>
                건우 학생에게 많은 칭찬과 응원을 보내주세요. 💪
            </p>
            <div id="word-cloud-container" class="relative w-full h-48 sm:h-56 md:h-64 mx-auto">
                <!-- Word cloud will be generated by JavaScript -->
            </div>
        </section>

        <!-- Detailed Analysis by Subject -->
        <h2 class="text-2xl font-bold mb-4 mt-10 text-center text-gray-800">과목별 학습 상세</h2>

        <!-- Korean -->
        <div class="korean-cards-container">
            <div class="section-card">
                <h3 class="text-xl font-bold text-gray-800 mb-3">📖 국어</h3>
                <div class="space-y-4">
                    <div><p class="text-sm text-gray-600 mt-1">1단원 <strong class="text-red-500">'까마귀 눈비 맞아/들판이 적막하다'</strong>를 읽으며 시에서 자연 현상과 정서를 통해 분위기와 감정을 표현하는 방법을 학습했습니다.</p></div>
                    <div><p class="text-sm text-gray-600 mt-1">시에 사용된 <strong class="text-blue-600">상징적 표현과 함축적 의미를 파악하는 문제</strong>가 자주 출제됩니다.</p></div>
                </div>
            </div>
            <div id="collapsible-korean-cards" style="display: none;">
                <div class="section-card"><div class="space-y-4"><div><p class="text-sm text-gray-600 mt-1"><strong class="text-red-500">'보고서 쓰기, 주장하는 글쓰기'</strong>에서 주제에 맞는 자료를 수집하고 객관적으로 정리하여 보고서나 주장하는 글의 근거로 활용하는 방법을 배웠습니다.</p></div><div><p class="text-sm text-gray-600 mt-1"><strong class="text-blue-600">주장과 근거의 논리적 연결을 명확히 하는 부분</strong>을 많은 친구들이 힘들어합니다.</p></div></div></div>
                <div class="section-card"><div class="space-y-4"><div><p class="text-sm text-gray-600 mt-1"><strong class="text-red-500">'설득 전략을 파악하며 읽기'</strong>를 통해 글에 사용된 설득 전략(예: 감성적 호소, 이성적 논증 등)을 파악하는 방법을 학습했습니다.</p></div><div><p class="text-sm text-gray-600 mt-1"><strong class="text-blue-600">설득 전략의 종류를 구분하고 글 속에서 그 예를 정확히 찾아내는 문제</strong>가 자주 출제됩니다.</p></div></div></div>
                <div class="section-card"><div class="space-y-4"><div><p class="text-sm text-gray-600 mt-1"><strong class="text-red-500">'자신 있게 말하기'</strong>에서는 말의 내용과 상황에 어울리는 표현을 사용하는 방법을 목소리, 표정, 몸짓을 조화롭게 사용하는 방향을 학습했습니다.</p></div><div><p class="text-sm text-gray-600 mt-1"><strong class="text-blue-600">말하기 목적에 맞는 말하기 방법(정보 전달, 설득 등)을 구분하고 적용하는 것</strong>이 중요합니다.</p></div></div></div>
                <div class="section-card"><div class="space-y-4"><div><p class="text-sm text-gray-600 mt-1"><strong class="text-red-500">'통일 시대의 우리말'</strong>을 통해 남북한의 언어 차이를 이해하고 공통점과 차이점을 바탕으로 언어 통일의 방향을 배웠습니다.</p></div><div><p class="text-sm text-gray-600 mt-1"><strong class="text-blue-600">어휘, 표기, 발음 등 남북한 언어 차이를 구체적으로 구별하는 것</strong>이 자주 출제됩니다.</p></div></div></div>
            </div>
        </div>
        <div class="flex justify-center -mt-4 mb-4"><button id="toggle-korean-button" class="text-indigo-600 hover:text-indigo-800 font-semibold text-sm py-2 px-4">더 보기 ▼</button></div>

        <!-- Science -->
        <div class="science-cards-container">
            <div class="section-card">
                <h3 class="text-xl font-bold text-gray-800 mb-3">🔬 과학</h3>
                <div class="space-y-4">
                    <div><p class="text-sm text-gray-600 mt-1">5단원 <strong class="text-red-500">'생식과 유전'</strong>에서 생명체는 유전 물질인 DNA를 담고 있는 세포를 분열시키고 수정하여 유전 형질을 다음 세대로 전달하는 내용을 배웠습니다.</p></div>
                    <div><p class="text-sm text-gray-600 mt-1"><strong class="text-blue-600">체세포 분열과 감수 분열의 과정 및 목적 차이를 구분하는 것</strong>을 많은 친구들이 어려워합니다.</p></div>
                </div>
            </div>
            <div id="collapsible-science-cards" style="display: none;">
                <div class="section-card"><div class="space-y-4"><div><p class="text-sm text-gray-600 mt-1">5단원 <strong class="text-red-500">'유전 법칙'</strong>에서 유전 형질은 유전자에 의해 결정되며, 멘델의 유전 법칙을 통해 유전 형질이 세대 간 어떻게 전달되는지 예측하는 내용을 학습했습니다.</p></div><div><p class="text-sm text-gray-600 mt-1"><strong class="text-blue-600">분리 법칙과 독립의 법칙의 차이와 유전 형질의 표현형·유전형 예측이 혼동되기 쉬운 부분</strong>입니다.</p></div></div></div>
                <div class="section-card"><div class="space-y-4"><div><p class="text-sm text-gray-600 mt-1">6단원 <strong class="text-red-500">'에너지 전환과 전기'</strong>를 통해 에너지는 형태를 바꾸어 전환될 수 있으며, 전기 에너지를 포함한 다양한 에너지는 보존 법칙을 따른다는 내용을 공부했습니다.</p></div><div><p class="text-sm text-gray-600 mt-1"><strong class="text-blue-600">전자기 유도에서 자기장, 코일, 전류 방향의 관계를 이해하고 판단하는 부분</strong>이 자주 출제됩니다.</p></div></div></div>
                <div class="section-card"><div class="space-y-4"><div><p class="text-sm text-gray-600 mt-1"><strong class="text-red-500">'속력, 운동의 분석, 등속 운동'</strong> 강의를 통해 물체의 운동은 시간에 따른 위치 변화로 설명되며, 속력과 방향을 함께 고려한 속도로 예측할 수 있다는 내용을 학습했습니다.</p></div><div><p class="text-sm text-gray-600 mt-1">이러한 운동 개념은 <strong class="text-blue-600">고등학교 물리의 운동 방정식, 가속도, 뉴턴의 운동 법칙 등 역학 분야의 기초</strong>가 됩니다.</p></div></div></div>
                <div class="section-card"><div class="space-y-4"><div><p class="text-sm text-gray-600 mt-1"><strong class="text-red-500">'원자의 구조, 주기율표, 전자 배치, 화학 결합'</strong> 강의를 통해 원자의 구조와 전자 배치는 원소의 성질과 화학 결합 방식에 영향을 주며, 이를 통해 다양한 물질의 성질과 반응을 배웠습니다.</p></div><div><p class="text-sm text-gray-600 mt-1">이 개념은 <strong class="text-blue-600">고등학교 화학에서 화학 결합의 정밀한 이해, 원자 궤도함수, 주기적 성질, 반응성 예측 등 심화된 원리 학습의 기초</strong>가 됩니다.</p></div></div></div>
            </div>
        </div>
        <div class="flex justify-center -mt-4 mb-4"><button id="toggle-science-button" class="text-indigo-600 hover:text-indigo-800 font-semibold text-sm py-2 px-4">더 보기 ▼</button></div>

        <!-- English -->
        <div class="english-cards-container">
            <div class="section-card">
                <h3 class="text-xl font-bold text-gray-800 mb-3">🔤 영어</h3>
                <div class="space-y-4">
                    <div><p class="text-sm text-gray-600 mt-1">5단원 <strong class="text-red-500">'to부정사와 관계부사'</strong>에서 to부정사는 문장에서 명사, 형용사, 부사처럼 쓰이며, 관계부사는 선행사와의 관계를 통해 문장을 연결해주는 역할을 한다는 부분을 학습했습니다.</p></div>
                    <div><p class="text-sm text-gray-600 mt-1"><strong class="text-blue-600">관계부사 when, where, why와 관계대명사의 구별 및 문장 속 용법 파악</strong>을 많은 친구들이 어려워합니다.</p></div>
                </div>
            </div>
            <div id="collapsible-english-cards" style="display: none;">
                <div class="section-card"><div class="space-y-4"><div><p class="text-sm text-gray-600 mt-1">5단원 본문을 통해 환경 문제를 해결하기 위한 창의적인 발명과 아이디어를 소개하며, <strong class="text-red-500">'help + 동사원형', 'be made of/from', 'in order to + 동사원형'</strong> 같은 표현을 배웠습니다.</p></div><div><p class="text-sm text-gray-600 mt-1"><strong class="text-blue-600">'be made of'와 'be made from'의 의미 차이와 쓰임을 구별하는 문제</strong>가 자주 출제됩니다.</p></div></div></div>
                <div class="section-card"><div class="space-y-4"><div><p class="text-sm text-gray-600 mt-1">6단원 <strong class="text-red-500">'the+비교급+S+V, the+비교급+S+V'</strong>의 구조는 두 가지 상황이 함께 변할 때의 관계를 나타내는 표현이라는 내용을 학습했습니다.</p></div><div><p class="text-sm text-gray-600 mt-1"><strong class="text-blue-600">두 절의 어순과 비교급 형용사·부사의 형태를 정확히 쓰는 부분</strong>에서 실수가 많습니다.</p></div></div></div>
            </div>
        </div>
        <div class="flex justify-center -mt-4 mb-4"><button id="toggle-english-button" class="text-indigo-600 hover:text-indigo-800 font-semibold text-sm py-2 px-4">더 보기 ▼</button></div>

        <!-- Learning Path Recommendation -->
        <h2 class="text-2xl font-bold mb-4 mt-10 text-center text-gray-800">학습 방향 추천</h2>
        
        <div class="section-card">
            <!-- Tab Buttons -->
            <div class="border-b border-gray-200">
                <nav id="subject-tabs" class="flex -mb-px" aria-label="Tabs">
                    <button data-tab="math" class="tab-button active">
                        <span class="text-2xl mr-2">📊</span> 수학 진도 분포
                    </button>
                    <button data-tab="english" class="tab-button">
                        <span class="text-2xl mr-2">📈</span> 영어 레벨 분포
                    </button>
                </nav>
            </div>

            <!-- Tab Content -->
            <div class="mt-6">
                <!-- Math Content -->
                <div id="math-content" class="tab-content active">
                    <div class="flex flex-wrap justify-between items-center mb-4 gap-4">
                        <div class="flex items-center flex-wrap gap-x-4 gap-y-2 text-sm">
                            <div class="flex items-center"><span class="w-4 h-4 rounded-full bg-red-500 mr-2 flex-shrink-0"></span><span>나의 진도</span></div>
                            <div class="flex items-center"><span class="w-4 h-4 rounded-sm bg-blue-200 mr-2 flex-shrink-0"></span><span>동학년 분포</span></div>
                            <div class="flex items-center"><span class="w-4 h-4 rounded-sm border-2 border-yellow-500 mr-2 flex-shrink-0"></span><span>상위권 주요 진도</span></div>
                        </div>
                    </div>
                    <div id="math-progress-grid" class="progress-grid" style="grid-template-columns: 80px repeat(4, 1fr);"></div>
                    <div class="text-left text-xs text-gray-400 mt-2">*상위권: 동학년 목표달성장학생 수강 현황<br>*진도를 터치하면 나/동학년의 주요 진도를 확인할 수 있습니다.</div>
                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-6 mt-6">
                        <h4 class="font-bold text-lg text-purple-800">💡 특목/자사고 합격자의 수학 학습 TIP</h4>
                        <p class="mt-3 text-sm text-purple-700">
                            <strong>특목/자사고에 합격한 엠베스트 회원들의 수학 학습 패턴을 분석한 결과, 현재 진도를 심화 강좌로 복습</strong>하는 경우가 대다수였고, <strong>심화 강좌를 개념 강좌와 동시에 학습</strong>하는 경우도 많았습니다.<br><br>
                            또한 <strong>학기별 연계성이 강한 수학 특성상, 다음 학년의 내용을 미리 공부</strong>하는 비중도 높았습니다. (예시: 1학년 2학기와 2학년 2학기 학습 병행)<br><br>
                            건우 학생의 수학 실력을 더욱 탄탄히 다지기 위해 필요한 강좌 혹은 추가 학습에 대해 함께 이야기 나누어 보시면 좋을 것 같습니다. 😎
                        </p>
                    </div>
                </div>

                <!-- English Content -->
                <div id="english-content" class="tab-content">
                    <div class="flex flex-wrap justify-between items-center mb-4 gap-4">
                        <div class="flex items-center flex-wrap gap-x-4 gap-y-2 text-sm">
                            <div class="flex items-center"><span class="w-4 h-4 rounded-full bg-red-500 mr-2 flex-shrink-0"></span><span>나의 레벨</span></div>
                            <div class="flex items-center"><span class="w-4 h-4 rounded-sm bg-blue-200 mr-2 flex-shrink-0"></span><span>동학년 분포</span></div>
                            <div class="flex items-center"><span class="w-4 h-4 rounded-sm border-2 border-yellow-500 mr-2 flex-shrink-0"></span><span>상위권 주요 레벨</span></div>
                        </div>
                    </div>
                    <div id="english-level-grid" class="progress-grid" style="grid-template-columns: repeat(5, 1fr);"></div>
                    <div class="text-left text-xs text-gray-400 mt-2">*상위권: 동학년 목표달성장학생 레벨 분포</div>
                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-6 mt-6">
                        <h4 class="font-bold text-lg text-purple-800">💡 특목/자사고 합격자의 영어 학습 TIP</h4>
                        <p class="mt-3 text-sm text-purple-700">
                            <strong>특목/자사고 합격생들은 영어의 기본기를 탄탄하게 다지는 것을 가장 중요하게 생각합니다.</strong> 특히, 꾸준한 단어 암기와 문법 학습을 통해 독해의 정확성을 높이는 데 집중하는 경향을 보입니다.<br><br>
                            또한, 현재 레벨에 만족하지 않고 <strong>한 단계 높은 수준의 지문을 미리 접하며 문제 해결 능력을 키우는 것</strong>도 상위권 학생들의 공통된 학습 패턴입니다.<br><br>
                            건우 학생도 현재 학습에 더해, 매일 10개씩 새로운 단어를 암기하고, 주 1회 심화 독해 문제에 도전해보는 것은 어떨까요? 작은 습관이 큰 실력 차이를 만들 수 있습니다. 🚀
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Educational Information -->
        <h2 class="text-2xl font-bold mb-4 mt-10 text-center text-gray-800">시기별 교육 정보</h2>
        <div class="section-card">
            <div class="bg-purple-50 border border-purple-200 rounded-lg p-6 flex flex-col space-y-6">
                <div>
                    <h4 class="font-bold text-lg text-purple-800">💡 고등학교는 나중에 고민하면 될까요?</h4>
                    <p class="mt-3 text-sm text-purple-700">
                        중학교 1학년, 특히 3월부터 <strong>자녀의 진로 방향을 염두에 두고 고등학교 선택의 틀을 잡아야 합니다.</strong> 이 시기엔 결정보다 이해가 먼저입니다. 어떤 고등학교들이 있고, <strong>우리 아이와 어떤 연결고리를 만들 수 있는지 아는 것</strong>이 중요합니다.
                    </p>
                </div>
                
                <div>
                    <h5 class="font-semibold text-md text-purple-800">✅ 고등학교 유형은 이렇게 나뉩니다.</h5>
                    <div class="mt-3 space-y-3 text-sm">
                        <div class="grid grid-cols-3 gap-2 p-2 rounded-lg">
                            <strong class="col-span-1 text-purple-900">특성화고/마이스터고</strong>
                            <span class="col-span-2 text-purple-700">직업교육 중심, 취업·기업연계 교육 중점으로 조기 진로 결정 필요</span>
                        </div>
                        <div class="grid grid-cols-3 gap-2 p-2 rounded-lg bg-purple-100">
                            <strong class="col-span-1 text-purple-900">자사고</strong>
                            <span class="col-span-2 text-purple-700">심화·특성화된 교육과정, 다양한 선택 과목, 일부 높은 대학 진학률 특징</span>
                        </div>
                         <div class="grid grid-cols-3 gap-2 p-2 rounded-lg">
                            <strong class="col-span-1 text-purple-900">외고/국제고</strong>
                            <span class="col-span-2 text-purple-700">외국어 및 국제 이해 교육 중심, 지원 요건과 평가 항목이 다양함</span>
                        </div>
                        <div class="grid grid-cols-3 gap-2 p-2 rounded-lg bg-purple-100">
                            <strong class="col-span-1 text-purple-900">과학고/영재학교</strong>
                            <span class="col-span-2 text-purple-700">수학·과학 중점 교육, 영재성 개발, 경쟁률이 보통 높은 편</span>
                        </div>
                        <div class="text-left text-xs text-gray-400 mt-2">*이외 일반고/예술고/체육고 유형 존재
                    </div>
                </div>

                <div>
                    <h5 class="font-semibold text-md text-purple-800">✅ 지금 학부모가 해야 할 3가지는?</h5>
                    <ul class="mt-3 space-y-2 text-sm text-purple-700">
                        <li class="flex items-start">
                            <span class="mr-2 text-lg">✔</span>
                            <span><strong>고교 유형별 특징 정리하기</strong> : 자녀와의 진로 대화에서 자연스럽게 이야기할 수 있도록 챙겨 두세요!</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2 text-lg">✔</span>
                            <span><strong>자녀의 현재 성향 관찰하기</strong> : 자녀가 어떤 환경에서 더 잘 성장할지 방향을 가늠하는 시기입니다.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2 text-lg">✔</span>
                            <span><strong>고등학교에 대한 편견 버리기</strong> : 다양한 고등학교는 각기 다른 강점을 갖고 있으며, 대입이나 취업 등 목표에 따라 유리한 선택이 달라질 수 있습니다.</span>
                        </li>
                    </ul>
                </div>

                <div>
                     <p class="mt-3 text-sm text-purple-700">
                        엠베스트 사이트/프라임 탭에서 확인할 수 있는 <strong class="text-purple-900">&lt;&lt;고교 선택 가이드&gt;&gt;를 통해, 고등학교를 이해하고 준비를 시작하는 기회를 가져보세요!</strong>자녀의 자존감 있는 선택으로 이어지는 든든한 밑거름이 될 거예요! 지금부터 차근차근 준비해 보세요.
                    </p>
                </div>
            </div>
        </div>
        
        <!-- D-Day Section -->
        <section class="section-card p-4">
            <div class="flex flex-col sm:flex-row items-center text-center sm:text-left">
                <div class="flex-shrink-0 mb-3 sm:mb-0 sm:mr-4">
                    <span class="text-red-600 font-bold text-2xl">D-13</span>
                </div>
                <div class="flex-grow">
                    <p class="text-gray-700 text-sm md:text-base leading-relaxed">
                        <strong>장평중학교의 2학기 개학일</strong>이 얼마 남지 않았습니다. 건우 학생이 <strong>2학기를 힘차게 시작할 수 있도록 응원과 격려를 보내주세요.</strong> 선선한 바람이 불어올 다음 달, 건우 학생의 또 다른 성장 이야기로 찾아뵙겠습니다.<br>
                    </p>
                </div>
            </div>
        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            // --- START: 공통 함수 및 데이터 ---
            const bgClasses = ['bg-blue-500', 'text-white', 'bg-blue-400', 'bg-blue-300', 'bg-blue-200', 'bg-blue-100', 'bg-gray-100'];

            function getBgColor(percentage) {
                if (percentage > 80) return 'bg-blue-500 text-white';
                if (percentage > 50) return 'bg-blue-400 text-white';
                if (percentage > 30) return 'bg-blue-300';
                if (percentage > 10) return 'bg-blue-200';
                if (percentage > 0) return 'bg-blue-100';
                return 'bg-gray-100';
            }
            // --- END: 공통 함수 및 데이터 ---

            // --- START: 워드 클라우드 생성 (반응형 및 시각 효과 개선) ---
            
            /**
             * Debounce function to limit the rate at which a function gets called.
             * @param {Function} func The function to debounce.
             * @param {number} wait The delay in milliseconds.
             * @returns {Function} The debounced function.
             */
            function debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }

            function createWordCloud() {
                const container = document.getElementById('word-cloud-container');
                if (!container || container.offsetWidth === 0) return;

                container.innerHTML = ''; 

                // 단어별 가중치를 조정하여 크기 차이를 극대화
                const words = [
                    {text: "성실히 출석중", size: 70},
                    {text: "학습질문 매니아", size: 65},
                    {text: "인강 습관 마스터", size: 45},
                    {text: "스윗타임 출첵러", size: 40},
                    {text: "프로 공부 배틀러", size: 35},
                    {text: "내꿈찾기 탐험가", size: 30},
                    {text: "집중 파워 업", size: 25},
                ];

                const width = container.offsetWidth;
                const height = container.offsetHeight;
                
                const colorScale = d3.scaleOrdinal()
                    .range(["#4f46e5", "#3b82f6", "#10b981", "#f59e0b", "#ef4444", "#8b5cf6"]);

                // 폰트 크기 스케일을 조정하여 더 극적인 차이를 만듦
                const minFontSize = 12;
                const maxFontSize = Math.max(40, width / 10); // 최대 폰트 크기 비율 조정
                const fontSizeScale = d3.scalePow().exponent(2)
                    .domain([d3.min(words, d => d.size), d3.max(words, d => d.size)])
                    .range([minFontSize, maxFontSize]);

                const layout = d3.layout.cloud()
                    .size([width, height])
                    .words(words.map(d => ({text: d.text, size: d.size})))
                    .padding(8)
                    // 모든 단어를 수평으로 표시
                    .rotate(() => 0) 
                    .font("Noto Sans KR")
                    .fontSize(d => fontSizeScale(d.size))
                    .on("end", draw);

                layout.start();

                function draw(words) {
                    d3.select(container).append("svg")
                        .attr("width", layout.size()[0])
                        .attr("height", layout.size()[1])
                        .append("g")
                        .attr("transform", "translate(" + layout.size()[0] / 2 + "," + layout.size()[1] / 2 + ")")
                        .selectAll("text")
                        .data(words)
                        .enter().append("text")
                        .attr("class", "word-cloud-text")
                        .style("font-size", "1px")
                        .style("font-family", "Noto Sans KR")
                        .style("font-weight", "bold")
                        .style("fill", (d, i) => colorScale(i))
                        .attr("text-anchor", "middle")
                        .attr("transform", d => "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")")
                        .text(d => d.text)
                        .transition()
                        .duration(600)
                        .style("font-size", d => d.size + "px");
                }
            }
            
            // 초기 로드 시 워드 클라우드 생성
            createWordCloud();
            // 창 크기 조절 시 디바운스를 적용하여 워드 클라우드 재생성
            window.addEventListener('resize', debounce(createWordCloud, 250));
            // --- END: 워드 클라우드 생성 ---

            // --- START: 토글 버튼 기능 추가 ---
            function setupToggle(buttonId, contentId) {
                const toggleButton = document.getElementById(buttonId);
                const collapsibleContent = document.getElementById(contentId);

                if (toggleButton && collapsibleContent) {
                    toggleButton.addEventListener('click', function() {
                        const isHidden = collapsibleContent.style.display === 'none';
                        collapsibleContent.style.display = isHidden ? 'block' : 'none';
                        this.innerHTML = isHidden ? '숨기기 ▲' : '더 보기 ▼';
                    });
                }
            }
            
            setupToggle('toggle-korean-button', 'collapsible-korean-cards');
            setupToggle('toggle-science-button', 'collapsible-science-cards');
            setupToggle('toggle-english-button', 'collapsible-english-cards');
            // --- END: 토글 버튼 기능 추가 ---

            // --- START: 탭 기능 ---
            const tabs = document.getElementById('subject-tabs');
            const tabContents = {
                math: document.getElementById('math-content'),
                english: document.getElementById('english-content')
            };

            tabs.addEventListener('click', function(e) {
                const button = e.target.closest('button');
                if (!button) return;

                const tab = button.dataset.tab;

                tabs.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');

                Object.values(tabContents).forEach(content => content.classList.remove('active'));

                if (tabContents[tab]) {
                    tabContents[tab].classList.add('active');
                }
            });
            // --- END: 탭 기능 ---


            // --- START: 수학 진도 분포표 ---
            const mathGrid = document.getElementById('math-progress-grid');
            const mathData = {
                topTier: { 
                    '1-1': { '기본': 30, '발전': 6, '심화': 3 }, 
                    '1-2': { '기본': 39, '발전': 5, '심화': 3 }, 
                    '2-1': { '기본': 5, '발전': 1, '심화': 1 }, 
                    '2-2': { '기본': 4, '발전': 3, '심화': 1 } 
                },
                myPosition: { semester: '1-2', level: '기본' },
                topTierPath: [ { semester: '1-2', level: '심화' }, { semester: '2-1', level: '발전' }, { semester: '2-2', level: '기본' } ],
                tooltips: { '1-2': { '기본': "[주요 학습 진도] 삼각형의 성질, 사각형의 성질", '발전': "[주요 학습 진도] 도형의 닮음", '심화': "[주요 학습 진도] 도형의 닮음" }, '2-1': { '기본': "[주요 학습 진도] 제곱근과 실수", '발전': "[주요 학습 진도] 다항식, 방정식", '심화': "[주요 학습 진도] 다항식, 방정식" }, '2-2': { '기본': "[주요 학습 진도] 삼각비", '발전': "[주요 학습 진도] 삼각비" } }
            };

            function createMathGrid() {
                if (!mathGrid) return;
                const semesters = ['중1-1', '중1-2', '중2-1', '중2-2'];
                const levels = ['심화', '발전', '기본'];
                let gridHtml = `<div class="grid-cell grid-header"></div>`;
                semesters.forEach(s => gridHtml += `<div class="grid-cell grid-header">${s}</div>`);
                levels.forEach(level => {
                    gridHtml += `<div class="grid-cell grid-header">${level}</div>`;
                    semesters.forEach(semester => { gridHtml += `<div class="grid-cell" data-semester="${semester.replace('중','')}" data-level="${level}"></div>`; });
                });
                mathGrid.innerHTML = gridHtml;
                renderMathGrid();
            }

            function renderMathGrid() {
                if (!mathGrid) return;
                const data = mathData.topTier;
                const semesters = ['1-1', '1-2', '2-1', '2-2'];
                const levels = ['심화', '발전', '기본'];
                levels.forEach(level => {
                    semesters.forEach(semester => {
                        const cell = mathGrid.querySelector(`[data-semester="${semester}"][data-level="${level}"]`);
                        if (!cell) return;
                        const percentage = data[semester]?.[level] ?? 0;
                        cell.classList.remove(...bgClasses, 'top-tier-path');
                        cell.classList.add(...getBgColor(percentage).split(' '));
                        let cellContent = `<span>${percentage > 0 ? `${percentage}%` : '&nbsp;'}</span>`;
                        let cellTitle = '';
                        if (mathData.myPosition.semester === semester && mathData.myPosition.level === level) {
                            cellContent = `<span class="me-icon">ME</span>` + cellContent;
                            cellTitle = "[나의 진도] 현재 이 위치에서 학습하고 있습니다.";
                        }
                        if (mathData.tooltips[semester]?.[level]) { cellTitle = (cellTitle ? `${mathData.tooltips[semester][level]}\n${cellTitle}` : mathData.tooltips[semester][level]); }
                        if (mathData.topTierPath.some(p => p.semester === semester && p.level === level)) { cell.classList.add('top-tier-path'); }
                        cell.innerHTML = cellContent;
                        cell.title = cellTitle;
                    });
                });
            }
            createMathGrid();
            // --- END: 수학 진도 분포표 ---

            // --- START: 영어 레벨 분포표 ---
            const englishGrid = document.getElementById('english-level-grid');
            const englishData = {
                distribution: { 'EB ~ EM': 1, 'EH ~ IB': 16, 'IM ~ IH': 33, 'AB ~ AM': 34, 'AH ~ MA': 16, },
                myPosition: 'IM ~ IH',
                topTierPath: ['AH ~ MA', 'AB ~ AM'],
                tooltips: { 'EB ~ EM': '기초 다지기 단계', 'EH ~ IB': '기본 개념 확장 단계', 'IM ~ IH': '응용 및 심화 시작 단계', 'AB ~ AM': '심화 문제 해결 단계', 'AH ~ MA': '최상위권 수준 완성 단계', }
            };

            function createAndRenderEnglishGrid() {
                if (!englishGrid) return;
                englishGrid.innerHTML = '';
                const levels = ['EB ~ EM', 'EH ~ IB', 'IM ~ IH', 'AB ~ AM', 'AH ~ MA'];
                levels.forEach(level => {
                    const headerCell = document.createElement('div');
                    headerCell.className = 'grid-cell grid-header';
                    headerCell.textContent = level;
                    englishGrid.appendChild(headerCell);
                });
                levels.forEach(level => {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell h-24';
                    const percentage = englishData.distribution[level] || 0;
                    const bgColorClass = getBgColor(percentage);
                    cell.classList.add(...bgColorClass.split(' '));
                    let contentHtml = `<span class="font-bold text-lg">${percentage}%</span>`;
                    let cellTitle = '';
                    if (englishData.myPosition === level) {
                        contentHtml = `<span class="me-icon">ME</span>` + contentHtml;
                        cellTitle = "[나의 진도] 현재 이 위치에서 학습하고 있습니다.";
                    }
                    if (englishData.tooltips[level]) { cellTitle = (cellTitle ? cellTitle + '\n' : '') + englishData.tooltips[level]; }
                    if (englishData.topTierPath.includes(level)) { cell.classList.add('top-tier-path'); }
                    cell.innerHTML = contentHtml;
                    cell.title = cellTitle;
                    englishGrid.appendChild(cell);
                });
            }
            createAndRenderEnglishGrid();
            // --- END: 영어 레벨 분포표 ---
        });
    </script>
</body>
</html>
